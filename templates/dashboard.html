<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ëŒ€ì‹œë³´ë“œ</title>
</head>
<body>
  <h1>ğŸŒ³ ì†Œì›ë‚˜ë¬´ í‚¤ìš°ê¸° ëŒ€ì‹œë³´ë“œ</h1>

  <!-- í˜„ì¬ ëª©í‘œ -->
  <section>
    <h2>í˜„ì¬ ëª©í‘œ: {{ goal.title }}</h2>
  </section>

  <!-- ë‹¬ì„±ëŸ‰ ë° ì§„í–‰ë„ -->
  <section>
    <p>
      ë‹¬ì„±ëŸ‰: <strong>{{ completed }} / {{ goal.target_value }}</strong>
      ({{ percent }}%)
    </p>
  </section>

  <!-- ë¬¼ì£¼ê¸° ë²„íŠ¼ -->
  <section>
    <form action="{{ url_for('water', goal_id=goal._id) }}" method="post">
      <button type="submit">ğŸ’§ ë¬¼ì£¼ê¸°</button>
    </form>
  </section>

  <!-- ë‚˜ë¬´ ì´ë¯¸ì§€ -->
  <section>
    <img
      src="{{ url_for('static', filename='tree0' ~ goal.growth_stage ~ '.png') }}"
      alt="ë‚˜ë¬´ ë ˆë²¨ {{ goal.growth_stage }}"
      width="150"  
      height="150"
      style="object-fit: contain;"
    >
  </section>

  {% if completed >= goal.target_value %}
    <!-- ëª©í‘œ ë‹¬ì„± í›„ ì‹ ê·œ ëª©í‘œ ë“±ë¡ -->
    <section>
      <h3>ğŸ‰ ëª©í‘œ ë‹¬ì„±! ìƒˆë¡œìš´ ëª©í‘œë¥¼ ë“±ë¡í•´ ë³´ì„¸ìš”</h3>
      <form action="{{ url_for('create_goal') }}" method="post">
        <input type="text" name="title" placeholder="ìƒˆ ëª©í‘œ ì œëª©" required>
        <input type="number" name="target_value" placeholder="ìƒˆ ëª©í‘œ ìˆ˜ì¹˜" min="1" required>
        <button type="submit">ìƒˆ ëª©í‘œ ë“±ë¡</button>
      </form>
    </section>

    <!-- ë¹„ìŠ·í•œ ëª©í‘œ ì¶”ì²œ -->
    <section>
      <h3>ğŸ” ë¹„ìŠ·í•œ ëª©í‘œ ì¶”ì²œ</h3>
      {% if similar_goals %}
        <ul>
          {% for sim in similar_goals %}
            <li>
              {{ sim.title }} â€” ëª©í‘œ: {{ sim.target_value }}
              
            </li>
          {% endfor %}
        </ul>
      {% else %}
        <p>ì•„ì§ ë¹„ìŠ·í•œ ëª©í‘œê°€ ì—†ì–´ìš”.</p>
      {% endif %}
    </section>
  {% endif %}

  <p><a href="{{ url_for('auth.logout') }}">ë¡œê·¸ì•„ì›ƒ</a></p>
</body>
</html>

