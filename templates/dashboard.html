<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Dashboard</title>
</head>
<body>
  <h1>내 소원나무 대시보드</h1>
  {% if stage and stage > 0 %}
    <p>현재 단계: {{ stage }} / 5</p>
    <img src="{{ url_for('static', filename='tree0' ~ stage ~ '.png') }}" alt="Tree Level {{ stage }}">
    <p>진행도: {{ current }} / {{ target }}</p>
    {% if stage == 5 %}
      <h2>🎉 축하합니다! 목표를 완전히 달성했습니다! 🎉</h2>
    {% else %}
      <form method="post" action="{{ url_for('update_progress', goal_id=goal_id) }}">
        <input type="hidden" name="goal_id" value="{{ goal_id }}">
        <label>오늘 달성량: <input type="number" name="increment" step="0.1"></label>
        <button type="submit">업데이트</button>
      </form>
    {% endif %}
  {% else %}
    <p>아직 생성된 목표가 없습니다.</p>
    <form method="post" action="{{ url_for('create_goal') }}">
      <label>목표명: <input type="text" name="title"></label><br>
      <label>목표 수치: <input type="number" name="target_value" step="0.1"></label><br>
      <button type="submit">목표 생성</button>
    </form>
  {% endif %}
  <p><a href="{{ url_for('auth.logout') }}">로그아웃</a></p>
</body>
</html>
